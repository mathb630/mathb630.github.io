<!doctype html>
<html>
   <head>
    <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" 
     crossorigin="anonymous">
     </script>
    <link rel="stylesheet" href="https://cartodb-
           libs.global.ssl.fastly.net/cartodb.js/v3/3.15/themes/css/cartodb.css" />
   <script src="https://cartodb-
           libs.global.ssl.fastly.net/cartodb.js/v3/3,15/cartodb.js"></script>
     
     <style>
        html, body {
          height:100%;
          margin: 0;
          padding: 0;
          width: 100%;
       }
        
        #map {
         height: 100%;
         width: 100%;
       }
        
        .buttons {
           position: absolute;
           top: 15px;
           left: 15px;
        }           
     </style>
  </head>
  <body>
    <div id="map"></div>
     <div class="buttons">
     <button class="legal businesses">legal businesses</button>
     <button class="reset">reset</button>
     </div>
     
    <script>
       var watsanlayer
      $(document).ready(function ()  {
            carto.db.createVis('map',
                  'https://bm8993.carto.com/u/bm8993/api/v2/viz/b33f2f0c-f8f5-11e6-975b-0ee66e2c9693/viz.json',)
                       .done(function (vis, layers) {
                       watsanlayer = layers[1].getSubLayer(0);
                               });           
       $('.public-water').click(function ()   {
          watsanLayer.setSQL("SELECT * FROM watsan WHERE watsan = 'water_public'");
        });
         $'reset').click(function () {
            watsanLayer.setSQL("SELECT * FROM watsan");
        });
     });
    </script>
  </body>         
</html>








